#!/usr/bin/env bash
# agent-bedtime: Claude Code Stop hook that reminds you to go to bed.
#
# Fires every turn when it's past bedtime. Uses exit 2 so Claude
# sees the message and will keep reminding you until you stop.
#
# Config: ~/.config/agent-bedtime (sourced as shell, live-reloaded)
#   BEDTIME_HOUR=23
#   BEDTIME_WAKEUP=6

BEDTIME_HOUR=23
BEDTIME_WAKEUP=6

CONFIG_FILE="${HOME}/.config/agent-bedtime"
[ -f "$CONFIG_FILE" ] && source "$CONFIG_FILE"

HOUR=$((10#$(date +%H)))

if [ "$HOUR" -lt "$BEDTIME_HOUR" ] && [ "$HOUR" -ge "$BEDTIME_WAKEUP" ]; then
    exit 0
fi

cat /dev/stdin > /dev/null
echo "[bedtime] It's past your bedtime. Please remind the user to wrap up and go to sleep." >&2
exit 2
